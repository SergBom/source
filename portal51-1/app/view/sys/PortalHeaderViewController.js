/*
 * File: app/view/sys/PortalHeaderViewController.js
 * Date: Thu Mar 02 2017 14:28:24 GMT+0300 (RTZ 2 (зима))
 *
 * This file was generated by Sencha Architect
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Ext JS 6.0.x Classic library, under independent license.
 * License of Sencha Architect does not include license for Ext JS 6.0.x Classic. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('Portal.view.sys.PortalHeaderViewController', {
    extend: 'Ext.app.ViewController',
    alias: 'controller.sys.portalheader',

    onBtnSysPortalHelpClick: function(button, e, eOpts) {
        var tab=Ext.getCmp('PortalMainPanel').getActiveTab().getXType();
        //var el = Ext.ComponentQuery.query('portalviewport')[0];
        var w=Ext.create('Portal.view.sys.PortalHelp').show();
        w.down('form').getForm().load({params:{alias:tab}});

    },

    onBtnSysHelpDeskClick: function(button, e, eOpts) {
        //console.log(Ext.getWin().down(''));
        //widget.portalviewport
        var tab=Ext.getCmp('PortalMainPanel').getActiveTab().getXType();
        //var el = Ext.ComponentQuery.query('portalviewport')[0];
        console.log(tab);
    },

    onLogoutClick: function(button, e, eOpts) {
        //console.log(button);
        //console.log(e);
        Ext.Msg.show({
            title:'',
            msg: 'Вы действительно желаете покинуть портал?',
            buttons: Ext.Msg.YESNO,
            icon: Ext.Msg.QUESTION,
            fn: function(btn) {
                if (btn === 'yes') {
                    Portal.util.SessionMonitor.closeSession();
                }
            }

        });

    },

    onHeaderFormAfterRender: function(component, eOpts) {
        this.getReferences().headerForm.getForm().load();
    }

});
