/*
 * File: app/view/EGRP/stat.js
 *
 * This file was generated by Sencha Architect version 4.1.1.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Ext JS 6.2.x Classic library, under independent license.
 * License of Sencha Architect does not include license for Ext JS 6.2.x Classic. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('Portal.view.EGRP.stat', {
   extend: 'Ext.tab.Panel',
   alias: 'widget.egrp.stat',

   requires: [
      'Portal.view.EGRP.statViewModel',
      'Portal.view.EGRP.statViewController',
      'Ext.toolbar.Toolbar',
      'Ext.form.field.ComboBox',
      'Ext.tab.Tab',
      'Ext.form.field.Hidden',
      'Ext.grid.Panel',
      'Ext.view.Table',
      'Ext.grid.plugin.Exporter',
      'Ext.grid.column.Number',
      'Ext.grid.column.RowNumberer'
   ],

   controller: 'egrp.stat',
   viewModel: {
      type: 'egrp.stat'
   },
   height: 404,
   width: 636,
   title: 'Статистика',
   activeTab: 0,

   dockedItems: [
      {
         xtype: 'toolbar',
         dock: 'top',
         items: [
            {
               xtype: 'combobox',
               reference: 'cbP',
               width: 270,
               editable: false,
               emptyText: 'Выберете протокол',
               displayField: 'NAME',
               valueField: 'ID',
               bind: {
                  store: '{menu}'
               },
               listeners: {
                  change: 'onPChange'
               }
            },
            {
               xtype: 'button',
               reference: 'btExcel',
               disabled: true,
               iconCls: 'icon-mime-excel',
               listeners: {
                  click: 'onExcelClick'
               }
            },
            {
               xtype: 'button',
               reference: 'btCalc',
               disabled: true,
               iconCls: 'icon-calculator',
               text: 'Посчитать в текущей вкладке',
               listeners: {
                  click: 'onCalcClick'
               }
            },
            {
               xtype: 'hiddenfield',
               reference: 'tmp',
               fieldLabel: 'Label'
            }
         ]
      }
   ],
   items: [
      {
         xtype: 'gridpanel',
         itemId: 'stat01',
         title: 'Общая',
         bind: {
            store: '{stat01}'
         },
         columns: [
            {
               xtype: 'gridcolumn',
               flex: 1,
               width: 200,
               dataIndex: 'name',
               exportStyle: {
                  col: {
                     width: 100
                  },
                  width: 120
               },
               text: 'Наименование'
            },
            {
               xtype: 'gridcolumn',
               dataIndex: 'd1',
               text: 'Документов<br>\nк выгрузке'
            },
            {
               xtype: 'gridcolumn',
               dataIndex: 'd2',
               text: 'Документов<br>\nне прошло<br>\nвыходной ФЛК'
            },
            {
               xtype: 'gridcolumn',
               dataIndex: 'd3',
               text: 'Объектов<br>\nвыгружено'
            },
            {
               xtype: 'gridcolumn',
               dataIndex: 'perc',
               text: '%<br>\nпрохождения<br>\nвыходного ФЛК'
            }
         ],
         tabConfig: {
            xtype: 'tab',
            dock: 'left'
         },
         plugins: [
            {
               ptype: 'gridexporter'
            }
         ]
      },
      {
         xtype: 'gridpanel',
         itemId: 'stat02',
         title: 'Для налоговой',
         bind: {
            store: '{stat02}'
         },
         columns: [
            {
               xtype: 'numbercolumn',
               width: 20,
               dataIndex: 'id',
               text: '#',
               format: '0'
            },
            {
               xtype: 'gridcolumn',
               renderer: function(value, metaData, record, rowIndex, colIndex, store, view) {
                  console.log(value);
                  if(value=='Всего:'){
                     return "<font color='red'>"+value+"</font>";
                  }else{return value;}
               },
               flex: 2,
               dataIndex: 'name',
               text: 'Тип ошибки'
            },
            {
               xtype: 'gridcolumn',
               width: 15,
               dataIndex: 'tire',
               text: '-'
            },
            {
               xtype: 'gridcolumn',
               flex: 1,
               dataIndex: 'calc',
               text: 'Количество'
            }
         ],
         tabConfig: {
            xtype: 'tab',
            dock: 'left'
         },
         plugins: [
            {
               ptype: 'gridexporter'
            }
         ]
      },
      {
         xtype: 'gridpanel',
         itemId: 'stat03',
         title: 'Вариант1 (ЕГРП)',
         bind: {
            store: '{stat03}'
         },
         tabConfig: {
            xtype: 'tab',
            dock: 'left'
         },
         columns: [
            {
               xtype: 'rownumberer'
            },
            {
               xtype: 'gridcolumn',
               flex: 2,
               width: 200,
               dataIndex: 'name',
               text: 'Тип ошибки'
            },
            {
               xtype: 'gridcolumn',
               flex: 1,
               dataIndex: 'calc',
               text: 'Количество'
            }
         ],
         plugins: [
            {
               ptype: 'gridexporter'
            }
         ]
      },
      {
         xtype: 'gridpanel',
         itemId: 'stat04',
         title: 'Вариант1 (ГКН)',
         bind: {
            store: '{stat04}'
         },
         columns: [
            {
               xtype: 'rownumberer',
               dataIndex: 'string',
               text: 'String'
            },
            {
               xtype: 'gridcolumn',
               flex: 2,
               width: 200,
               dataIndex: 'name',
               text: 'Тип ошибки'
            },
            {
               xtype: 'gridcolumn',
               flex: 1,
               dataIndex: 'calc',
               text: 'Количество'
            }
         ],
         tabConfig: {
            xtype: 'tab',
            dock: 'left'
         },
         plugins: [
            {
               ptype: 'gridexporter'
            }
         ]
      },
      {
         xtype: 'gridpanel',
         itemId: 'stat05',
         title: 'Вариант1а (ЕГРП)',
         bind: {
            store: '{stat05}'
         },
         columns: [
            {
               xtype: 'rownumberer'
            },
            {
               xtype: 'gridcolumn',
               flex: 1,
               width: 150,
               dataIndex: 'otdel',
               text: 'Отдел'
            },
            {
               xtype: 'gridcolumn',
               flex: 2,
               width: 200,
               dataIndex: 'error',
               text: 'Тип ошибки'
            },
            {
               xtype: 'gridcolumn',
               dataIndex: 'metka',
               text: 'Отметка'
            },
            {
               xtype: 'gridcolumn',
               width: 64,
               dataIndex: 'calc',
               text: 'Количество'
            }
         ],
         tabConfig: {
            xtype: 'tab',
            dock: 'left'
         },
         plugins: [
            {
               ptype: 'gridexporter'
            }
         ]
      },
      {
         xtype: 'gridpanel',
         itemId: 'stat06',
         title: 'Вариант1а (ГКН)',
         bind: {
            store: '{stat06}'
         },
         columns: [
            {
               xtype: 'rownumberer'
            },
            {
               xtype: 'gridcolumn',
               flex: 1,
               width: 150,
               dataIndex: 'otdel',
               text: 'Отдел'
            },
            {
               xtype: 'gridcolumn',
               flex: 2,
               width: 200,
               dataIndex: 'error',
               text: 'Тип ошибки'
            },
            {
               xtype: 'gridcolumn',
               dataIndex: 'metka',
               text: 'Отметка'
            },
            {
               xtype: 'gridcolumn',
               width: 64,
               dataIndex: 'calc',
               text: 'Количество'
            }
         ],
         tabConfig: {
            xtype: 'tab',
            dock: 'left'
         },
         plugins: [
            {
               ptype: 'gridexporter'
            }
         ]
      },
      {
         xtype: 'gridpanel',
         itemId: 'stat07',
         title: 'Вариант2',
         bind: {
            store: '{stat07}'
         },
         tabConfig: {
            xtype: 'tab',
            dock: 'left'
         },
         columns: [
            {
               xtype: 'gridcolumn',
               flex: 1,
               width: 200,
               dataIndex: 'name',
               text: 'Описание ошибки'
            },
            {
               xtype: 'gridcolumn',
               text: 'Статус ошибки',
               columns: [
                  {
                     xtype: 'gridcolumn',
                     dataIndex: 'ern',
                     text: 'Не обраб.'
                  },
                  {
                     xtype: 'gridcolumn',
                     dataIndex: 'er0',
                     text: 'Ошибка'
                  },
                  {
                     xtype: 'gridcolumn',
                     dataIndex: 'er1',
                     text: 'Исправл.'
                  },
                  {
                     xtype: 'gridcolumn',
                     dataIndex: 'er2',
                     text: 'Не возм.испр.'
                  },
                  {
                     xtype: 'gridcolumn',
                     dataIndex: 'er3',
                     text: 'Не обнар.'
                  }
               ]
            },
            {
               xtype: 'gridcolumn',
               dataIndex: 'calc',
               text: 'Всего'
            }
         ],
         plugins: [
            {
               ptype: 'gridexporter'
            }
         ]
      },
      {
         xtype: 'gridpanel',
         itemId: 'stat08',
         title: 'Вариант3',
         bind: {
            store: '{stat08}'
         },
         tabConfig: {
            xtype: 'tab',
            dock: 'left'
         },
         columns: [
            {
               xtype: 'gridcolumn',
               flex: 1,
               width: 150,
               dataIndex: 'name',
               text: 'Наименование отдела'
            },
            {
               xtype: 'gridcolumn',
               text: 'Статус ошибки',
               columns: [
                  {
                     xtype: 'gridcolumn',
                     width: 70,
                     dataIndex: 'ern',
                     text: 'Не обраб.'
                  },
                  {
                     xtype: 'gridcolumn',
                     width: 70,
                     dataIndex: 'er1',
                     text: 'Исправл.'
                  },
                  {
                     xtype: 'gridcolumn',
                     width: 70,
                     dataIndex: 'er2',
                     text: 'Не возм.испр.'
                  },
                  {
                     xtype: 'gridcolumn',
                     width: 70,
                     dataIndex: 'er3',
                     text: 'Не обнар.'
                  }
               ]
            },
            {
               xtype: 'gridcolumn',
               width: 70,
               dataIndex: 'calc',
               text: 'Всего'
            }
         ],
         plugins: [
            {
               ptype: 'gridexporter'
            }
         ]
      },
      {
         xtype: 'gridpanel',
         itemId: 'stat09',
         title: 'Вариант4 (ЕГРП)',
         bind: {
            store: '{stat09}'
         },
         tabConfig: {
            xtype: 'tab',
            dock: 'left'
         },
         columns: [
            {
               xtype: 'gridcolumn',
               flex: 1,
               width: 150,
               dataIndex: 'name',
               text: 'Наименование отдела'
            },
            {
               xtype: 'gridcolumn',
               defaultWidth: 70,
               text: 'Статус ошибки',
               columns: [
                  {
                     xtype: 'gridcolumn',
                     dataIndex: 'erf',
                     text: 'РФ'
                  },
                  {
                     xtype: 'gridcolumn',
                     dataIndex: 'ern',
                     text: 'Не обраб.'
                  },
                  {
                     xtype: 'gridcolumn',
                     width: 70,
                     dataIndex: 'er1',
                     text: 'Исправл.'
                  },
                  {
                     xtype: 'gridcolumn',
                     width: 70,
                     dataIndex: 'er2',
                     text: 'Не возм.испр.'
                  },
                  {
                     xtype: 'gridcolumn',
                     width: 70,
                     dataIndex: 'er3',
                     text: 'Не обнар.'
                  }
               ]
            },
            {
               xtype: 'gridcolumn',
               width: 70,
               dataIndex: 'calc',
               text: 'Всего'
            },
            {
               xtype: 'gridcolumn',
               width: 70,
               dataIndex: 'pispr',
               text: '%<br>испр.'
            },
            {
               xtype: 'gridcolumn',
               width: 70,
               dataIndex: 'pobr',
               text: '%<br>обр.'
            }
         ],
         plugins: [
            {
               ptype: 'gridexporter'
            }
         ]
      },
      {
         xtype: 'gridpanel',
         itemId: 'stat10',
         title: 'Вариант4 (ГКН)',
         bind: {
            store: '{stat10}'
         },
         tabConfig: {
            xtype: 'tab',
            dock: 'left'
         },
         columns: [
            {
               xtype: 'gridcolumn',
               flex: 1,
               width: 150,
               dataIndex: 'name',
               text: 'Наименование отдела'
            },
            {
               xtype: 'gridcolumn',
               defaultWidth: 70,
               text: 'Статус ошибки',
               columns: [
                  {
                     xtype: 'gridcolumn',
                     dataIndex: 'erf',
                     text: 'РФ'
                  },
                  {
                     xtype: 'gridcolumn',
                     dataIndex: 'ern',
                     text: 'Не обраб.'
                  },
                  {
                     xtype: 'gridcolumn',
                     width: 70,
                     dataIndex: 'er1',
                     text: 'Исправл.'
                  },
                  {
                     xtype: 'gridcolumn',
                     width: 70,
                     dataIndex: 'er2',
                     text: 'Не возм.испр.'
                  },
                  {
                     xtype: 'gridcolumn',
                     width: 70,
                     dataIndex: 'er3',
                     text: 'Не обнар.'
                  }
               ]
            },
            {
               xtype: 'gridcolumn',
               width: 70,
               dataIndex: 'calc',
               text: 'Всего'
            },
            {
               xtype: 'gridcolumn',
               width: 70,
               dataIndex: 'pispr',
               text: '%<br>испр.'
            },
            {
               xtype: 'gridcolumn',
               width: 70,
               dataIndex: 'pobr',
               text: '%<br>обр.'
            }
         ],
         plugins: [
            {
               ptype: 'gridexporter'
            }
         ]
      }
   ],
   listeners: {
      tabchange: 'onTabpanelTabChange'
   }

});